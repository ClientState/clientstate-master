// Generated by CoffeeScript 1.8.0
(function() {
  var ProviderLoginDetails, User, bookshelf, knex,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  knex = require('./conn').knex;

  bookshelf = require('bookshelf')(knex);

  User = (function(_super) {
    __extends(User, _super);

    function User() {
      return User.__super__.constructor.apply(this, arguments);
    }

    User.tableName = 'users';

    User.logins = function() {
      return this.hasMany(ProviderLoginDetails);
    };

    User.createTable = function(t) {
      t.increments('id');
      return t.timestamps();
    };

    return User;

  })(bookshelf.Model);

  ProviderLoginDetails = (function(_super) {
    __extends(ProviderLoginDetails, _super);

    function ProviderLoginDetails() {
      return ProviderLoginDetails.__super__.constructor.apply(this, arguments);
    }

    ProviderLoginDetails.tableName = 'provider_login_details';

    ProviderLoginDetails.createTable = function(t) {
      t.increments('id');
      t.string('provider');
      t.text('data');
      t.timestamps();
      return t.integer('user_id').unsigned().references('id').inTable('users');
    };

    return ProviderLoginDetails;

  })(bookshelf.Model);


  /*
  class App extends bookshelf.Model
    tableName: 'apps'
  
     * many ProviderIDSecrets
  
    user: () ->
      @belongsTo User
  
    services: () ->
      @hasMany Service
  
  
  class ProviderIDSecret extends bookshelf.Model
    tableName: 'provider_id_secrets'
  
     * provider
     * client_id
     * client_secret
  
    app: () ->
      @belongsTo App
  
  
  class Service extends bookshelf.Model
    tableName: 'services'
  
    secrets: () ->
      @hasMany ProviderIDSecret
  
    deployments: () ->
      @hasMany ServiceDeployment
  
  
  class ServiceDeployment extends bookshelf.Model
    tableName: 'service_deployments'
  
    service: () ->
      @hasOne Service
   */

  module.exports.User = User;

  module.exports.ProviderLoginDetails = ProviderLoginDetails;

}).call(this);
